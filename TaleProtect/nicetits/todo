separate the config downloading logic into this file